### Настройка файла config.json

Настройка состоит из файлов `main_config.json` и `cover_config.json` 

### Файл main_config.json
|           Параметр           |                                                                                                                                                                                                                                                              Описание                                                                                                                                                                                                                                                               |        Пример        |
|:----------------------------:|:-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:--------------------:|
|            token             |  Ключ доступа пользователя или сообщества с доступом к фотографиям и управлению сообществом ([Подробнее](https://dev.vk.com/api/access-token/getting-started#%D0%9A%D0%BB%D1%8E%D1%87%20%D0%B4%D0%BE%D1%81%D1%82%D1%83%D0%BF%D0%B0%20%D1%81%D0%BE%D0%BE%D0%B1%D1%89%D0%B5%D1%81%D1%82%D0%B2%D0%B0)). **Внимание!** Рекомендуется использовать ключ доступа пользователя, т.к. с ключом сообщества некоторые виджеты могут быть недоступны! Некоторые виджеты требуют ключ с дополнительным доступом, например, к стене сообщества.  |  "vk1.asdajgke-va8"  |                                                                                                                                                                                                                                                                                                           |                                                                   |
|           group_id           |                                                                                                                                                                                                                      Идентификатор сообщества, для которого обновляется обложка. Имеет отрицательное значение.                                                                                                                                                                                                                      |      -123456789      |
|    sleep (необязательно)     |                                                                                                                                                                                                   Задержка между обновлениеми шапки. Можно указать список чисел, тогда задержка будет меняться циклично. По умолчанию 60 секунд.                                                                                                                                                                                                    |    [60, 100, 70]     |
|    app_id (необязательно)    |                                                                                                                                                                                                                          Идентификатор приложения Вконтакте. Требуется, если включен виджет `Subscriber`.                                                                                                                                                                                                                           |      123123123       |
|  donate_key (необязательно)  |                                                                                                                                                                                                                    Ключ от приложения "Таноды". Необходим для получения списка донатеров в виджете `Subscriber`.                                                                                                                                                                                                                    |      "asd2dja2"      |
|           VERSION            |                                                                                                                                                                                                                                            Версия конфига. Не трогать без необходимости.                                                                                                                                                                                                                                            |                      |

Версия `0.1`

### Файл cover_config.json
|      Параметр       |                                                                                                                                                             Описание                                                                                                                                                             |                                         Пример                                          |  По умолчанию   |
|:-------------------:|:--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:---------------------------------------------------------------------------------------:|:---------------:|
|        show         |  Список из виджетов, которые необходимо отобразить. Можно задавать вложенные списки виджетов. Тогда списки виджетов будут отображаться последовательно. Например, [["w1, "w2"], ["w3"], ["w4", "w5"]] - сначала отобразяться виджеты "w1" и "w2", при следующем обновлении - "w3", затем - виджеты "w4", "w5", далее - сначала.  |                             ["widget_set1", "widget_set2"]                              |       []        |
|       widgets       |                                                                                                                                                       Список из виджетов.                                                                                                                                                        |  [{"type": "Text", "name": "w1", "xy": [10,20], ...}, {"type": "picture", ...}, {...}}  |       []        |
|       VERSION       |                                                                                                                                          Версия конфига. Не трогать без необходимости.                                                                                                                                           |                                                                                         |

Версия `1.1`

***
### Виджеты
###### Виджет
Виджет - это объект, отображающий определенную информацию на обложке сообщества. Каждый виджет имеет как минимум два поля: `name` и `type`. 
От типа зависят остальные поля и работа виджета. Имя необходимо для включения виджета в список отображения. 
В поле `widgets` заносится информация об отображаемых виджетах. 
Некоторые виджеты могут включать в себя другие виджеты как отдельные поля или включать в себя все поля другого виджета. Для описания вложенных виджетов можно не писать их тип и имя.


***
### Виджет Text
Предназначен для отрисовки текста.

|   Параметр   |                                                                                                                                                                                              Описание                                                                                                                                                                                               |          Пример          |  По умолчанию  |
|:------------:|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:------------------------:|:--------------:|
|     text     |                                                                                                                                                                                  Текст, который нужно отобразить.                                                                                                                                                                                   |  "my text \n my  text2"  |       ""       |
|      xy      |                                                                                                                                                                                   Координаты текста в пикселях.                                                                                                                                                                                     |        	 [10, 20]        |    	[0, 0]     | 
|  font_name   |                                                                                                                                                                                          Название шрифта.                                                                                                                                                                                           |        "my_font"         |  `main_font`   |
|  font_size   |                                                                                                                                                                     Размер шрифта. Не работает, если не установлен `font_name`                                                                                                                                                                      |            14            |       12       |
|     fill     |                                                                                                                                              Цвет текста ([подробнее](https://pillow.readthedocs.io/en/stable/reference/ImageColor.html#color-names)).                                                                                                                                              |          "red"           |      None      |
|    anchor    |                                                                                                                                Выравнивание текста относительно `xy` ([подробнее](https://pillow.readthedocs.io/en/stable/handbook/text-anchors.html#text-anchors)).                                                                                                                                |           "mm"           |      None      |
|   spacing    |                                                                                                                                                                    Количество пикселей между строками, если текст многострочный.                                                                                                                                                                    |            10            |       4        |
|  direction   |                                                                                                                                                       Направление текста: "rtl" (справа налево), "ltr" (слева направо), "ttb" (сверху вниз).                                                                                                                                                        |          "ttb"           |      None      |
| stroke_width |                                                                                                                                                                                       Ширина обводки текста.                                                                                                                                                                                        |            2             |       0        |
| stroke_fill  |                                                                                                                                                                                        Цвет обводки текста.                                                                                                                                                                                         |          "red"           |      None      |
|  space_type  | Возможные значения: `None`, `pre_form`, `post_form`, `with_start`. Если не `None`, то можно вставлять в текст пустое место. `pre_form` - вставка пустого места перед форматированием текста (форматированные части текста считаются пустой строкой), `post_form` - вставка пустого места после форматирования текста, `with_start` - вставка пустого места, начиная сначала и игнорируя все символы |     `pre_formatting`     |      None      |
| limit_action |                                                                                                            Действие при достижении лимита. Возможные значения: `delete` - удалить все символы, превышающие лимит, `newline` - перенести все символы, превышающие лимит, на новую строку.                                                                                                            |        "newline"         |      None      |
|  limit_end   |                                                                                                                                                                             Строка, ставящаяся после превышения лимита.                                                                                                                                                                             |          "..."           |       ""       |
|    to_int    |                                                                                                                                                       `true` или `false`. Перевести ли все результаты арифметических действий в целое число.                                                                                                                                                        |           true           |     false      |

##### Подстановка аргументов
Аргументами является список ключевых слов. Такие слова можно подставлять в тексте в фигурных скобочках `{arg}`. Аргументы меняются на соответствующие им значения.

##### Ограничение текста
Текст можно ограничивать по количеству символов. Для этого необходимо заключить текст в следуюшую конструкцию: `[text][N]`, где `N` - максимальное количество символов.

##### Вставка пустого места
В тексте можно задать параметры `:vspace(N):` и `:hspace(N):`, на месте которых вставится пустое пространство длины N пикселей по вертикали и горизонтали соответственно.

##### Арифметические действия 
При заключении текста `<text>` можно выполнять арифметические действия. Текст должен представлять собой правильное арифметическое выражение.

***
### Виджет Picture
Предназначен для отображения картинки

|  Параметр  |                                                                                                                                                                                              Описание                                                                                                                                                                                               |          Примеры           |  По умолчанию  |
|:----------:|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:--------------------------:|:--------------:|
|    path    |                                                                                                                                                                                      Полный путь до картинки.                                                                                                                                                                                       |     /pictures/pic.png      |      None      |
|    url     |                                                                                                                                                                    URL картинки. Если установлен `path`, то `url` игнорируется.                                                                                                                                                                     |  https://pictures/pic.png  |      None      |
|     xy     |                                                                                                                                                                        Координаты левого верхнего угла картинки в пикселях.	                                                                                                                                                                        |          10, 20]           |    	[0, 0]     |
|   resize   |  Информация об изменении размера картинки. Значение представляет собой пару `[width, height]`, где `width`, `height` - количество пикселей, на которое необходимо изменить размер картинки по длине и ширине соответственно. Значения `width` или `height` могут быть строкой "auto", если необходимо пропорцианально изменить размер. Если оба значения являются "auto", то ничего не произойдет.  |       [100, "auto"]        |      None      |

### Виджет VkAvatar
Аватар пользователя

|        Параметр         |                                                                            Описание                                                                             |           Пример            |  По умолчанию  |
|:-----------------------:|:---------------------------------------------------------------------------------------------------------------------------------------------------------------:|:---------------------------:|:--------------:|
|  user_id (обязательно)  |                                                                         id пользователя                                                                         |            12345            |      None      |
|        crop_type        |  Тип вырезанного фото пользователя. Возможные значения: `original` - оригинальная фотография, `crop` - вырезанная фотография, `small` - миниатюрная фотография  |            small            |      crop      |
|       default_url       |                                       URL фотографии по умолчанию. Используется, если у пользователя отсутствует аватар.                                        |  "https://example/img.png"  |      None      |
|           ...           |                                                            Все остальные параметры виджета `Picture`                                                            |                             |                |

### Виджет RandomPicture
Предназначен для случайного выбора картинки

|  Параметр   |                                                   Описание                                                   |                  Пример                  |  По умолчанию  |
|:-----------:|:------------------------------------------------------------------------------------------------------------:|:----------------------------------------:|:--------------:|
|    path     |                                      Полный путь до папки с картинками.                                      |             "/usr/pictures"              |      None      |
|  album_url  |              URL ВК-альбома с картинками. Если установлен `path`, то `album_url` игнорируется.               |  "https://vk.com/album-11111_284934352"  |      None      |
|   user_id   |  id пользователя. Если установлен, то выбор происходит по формуле `user_id%N`, где N - количество картинок.  |        "https://example/img.png"         |      None      |
|     ...     |                                  Все остальные параметры виджета `Picture`                                   |                                          |                |


***
### Виджет Date
Предназначен для отображения даты и времени.

|  Параметр  |                                                    Описание                                                     |               Пример               |                По умолчанию                |
|:----------:|:---------------------------------------------------------------------------------------------------------------:|:----------------------------------:|:------------------------------------------:|
|   shift    |  Информация в виде `{аргумент: смещение}`, показывающая, какое необходимо сделать смещение в дате или времени.  |       {"day": 2, "hour": -3}       |  Смещение по каждому аргументу равно нулю  |
|    ...     |                        Все остальные параметры виджета `Text`, включая `texts` и `text`                         |   "text": "{day}.{month}.{year}"   |                    None                    |

#### Аргументы Date:
1. year - год;
2. month - номер месяца (1 - январь, 12 - декабрь);
3. month_rus* - название месяца в именительном падеже ("январь", "декабрь");
4. month_rus_r* - название месяца в родительном падеже ("января", "декабря");
5. week - номер дня недели (1 - понедельник, 7 - воскресенье);
6. week_rus* - название дня недели ("понедельник", "воскресенье");
7. day - день месяца;
8. hour - часы;
9. minute - минуты;
10. second - секунды;
11. month_z - месяц с ведущим нулём;
12. day_z - день месяца с ведущим нулём;
13. hour_z - часы с ведущим нулём;
14. minute_z - минуты с ведущим нулём;
15. second_z - секунды с ведущим нулём.

##### * Данные параметры не могут быть поставлены в качестве аргумента в параметре `shift`.

***
### Виджет Statistics
Предназначен для отображения статистики сообщества.

|  Параметр  |                                               Описание                                                |                  Примеры                  |          По умолчанию           |
|:----------:|:-----------------------------------------------------------------------------------------------------:|:-----------------------------------------:|:-------------------------------:|
|  interval  |  Временной интервал получения статистики. Возможные значения: `day`, `week`, `month`, `year`, `all`.  |  "month" (статистика за последний месяц)  |              "day"              |
|  group_id  |                     Идентификатор сообщества, из которого нужно взять статистику.                     |                 -1234456                  |  group_id из основных настроек  |
|    ...     |                                Все остальные параметры виджета `Text`.                                |   "text": "подписчиков: {member_count}"   |              None               |

#### Аргументы Statistics:
1. members_count - количество подписчиков (не зависит от `interval`);
2. comments - количество комментариев;
3. copies - количество репостов;
4. hidden - количество пользователей, скрывших записи из новостей;
5. likes - количество отметок «нравится»;
6. subscribed - количество подписавшихся пользователей на сообщество;
7. unsubscribed - количество отписавшихся пользователей на сообщество;
8. views - число просмотров;
9. visitors - число посетителей;
10. reach - полный охват;
11. reach_subscribers - охват подписчиков;
12. mobile_reach - охват с мобильных устройств.

***
### Виджет Profile
Предназначен для вывода информации о пользователе и его аватарки.

|  Параметр  |                                                             Описание                                                             |               Примеры                |     По умолчанию     |
|:----------:|:--------------------------------------------------------------------------------------------------------------------------------:|:------------------------------------:|:--------------------:|
|  user_id   |                                                         id пользователя                                                          |                12345                 |         None         |
|   avatar   |  Виджет `Picture` или его производные. Если виджет требует параметра `user_id`, то `user_id` будет подставляться автоматически.  |  {"type": "Avatar", "xy": [10,10]}   |  None - без аватара  |
|    ...     |                                              Все остальные параметры виджета `Text`                                              |  "text": "{first_name} {last_name}"  |         None         |


##### Аргументы Profile:
1. first_name - имя;
2. last_name - фамилия.

***
### Виджет Rating
Предназначен для вывода рейтинга среди подписчиков.

Виджет позволяет вывести лучших лайкеров, комментаторов, репостеров и т.п. за выбранный период; 
настроить собственный подсчёт очков; 
вывести последних людей, подписавшихся на сообщество.  

**Внимание! Виджет требует параметр `app_id` в основных настройках, а также ключ доступа с правом доступа к стене сообщества.**

|    Параметр     |                                                                                                                                        Описание                                                                                                                                         |               Пример                |                По умолчанию                |
|:---------------:|:---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------:|:-----------------------------------:|:------------------------------------------:|
|    group_id     |                                                                                                             Идентификатор сообщества, рейтинг которого необходимо получить                                                                                                              |              -1123345               |       group_id из основных настроек        |
|     period      |                                   Период, за который ведётся рейтинг. По истечению периода вся статистика сбрасывается. Все очки начисляются только за те посты, которые входят в данный период. Возможные значения: `day`, `week`, `month`, `year`.                                    |               "year"                |                  "month"                   |
|  point_formula  |                                                                                                                               *Формула для расчета очков.                                                                                                                               |  "{post_likes}+{post_comments}*2"   |                     ""                     |
|    last_subs    |                                                                               Устанавливать ли рейтинг последних подписчиков: `false` или `true`. Если `true`, то игнорируются параметр `point_formula`.                                                                                |               "true"                |                  "false"                   |  
|     places      |  Список из виджетов `RatingPlace` (см. ниже). Это список виджетов, отображающих информацию об участнике. Причем на первом виджете из списка отобразиться информация об участнике, стоящим на первом месте в рейтинге, на втором виджете - об участнике, стоящий на втором месте и т.д.  |         [{...}, {...}, ...]         |                     []                     |
|    ban_list     |                                                                                                           Список из идентификаторов пользователей, чей рейтинг не учитывать.                                                                                                            |          [123456, 8765423]          |                     []                     |
|      shift      |                                                                                                                              См. `shift` в виджете `Date`.                                                                                                                              |       {"day": 2, "hour": -3}        |  Смещение по каждому аргументу равно нулю  |
|    date_from    |                                                                                                                  Строка с аргументами даты и времени. Начало периода.                                                                                                                   |         "{day} {month_rus}"         |         "{day_z}.{month_z}.{year}"         | 
|     date_to     |                                                                                                                   Строка с аргументами даты и времени. Конец периода.                                                                                                                   |         "{day} {month_rus}"         |         "{day_z}.{month_z}.{year}"         |
|       ...       |                                                                                                                         Все остальные параметры виджета `Text`                                                                                                                          |                                     |                                            |


##### Аргументы Rating:
1. date_from - дата начала периода;
2. date_to - дата конца периода.

##### *Формула для расчета очков
Строка, состоящая из аргументов и арифметических операций.
Возможные аргументы:
1. post_likes - количество лайков под постами
2. comment_likes - количество лайков под комментами
3. post_comments - количество комментариев к постам
4. reposts - количество репостов
5. posts - количество постов от этого автора
6. donates - количество доната
7. views_of_reposts - сумма просмотров на всех репостах от этого автора
8. likes_of_reposts - сумма лайков на всех репостах от этого автора
9. likes_of_posts - сумма лайков на всех постах от этого автора
10. likes_of_comments - сумма лайков на всех комментах, что оставил пользователь под постами
11. comments_of_posts - сумма комментов на всех постах от этого автора

#### RatingPlace
Виджет отображает информацию об i-ом участнике рейтинга.

**Виджет не может существовать вне виджета Rating**

|     Параметр     |                         Описание                          |                 Пример                  |  По умолчанию  |
|:----------------:|:---------------------------------------------------------:|:---------------------------------------:|:--------------:|
|  default_avatar  |    Виджет `Picture`. Используется, если место пустое.     |  {"path": "./pic.png", "xy": [20, 25]}  |      None      |
|       ...        |  Все поля виджета `Profile` без указания поля `user_id`.  |                   ...                   |      None      |

##### Аргументы MemberPlace:
Все аргументы из формулы для расчета очков